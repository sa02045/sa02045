---
title: 'TypeScript 5.5 ê¸°ëŠ¥ Type Predicate Inference ë¯¸ë¦¬ë³´ê¸°'
date: '2024-03-17'
description: 'ì´ì œ Type Predicatesê°€ í•„ìš”ì—†ì„ ìˆ˜ë„'
---

íƒ€ì…ìŠ¤í¬ë¦½íŠ¸ë¡œ ì‘ì„±ëœ ì˜¤í”ˆì†ŒìŠ¤ ì½”ë“œë¥¼ ë³´ë‹¤ë³´ë©´ ë‹¤ìŒê³¼ ê°™ì€ ì½”ë“œë¥¼ ë³¼ ìˆ˜ ìˆìŠµë‹ˆë‹¤. ë‹¤ìŒì€ [react-hook-form](https://github.com/react-hook-form/react-hook-form/blob/00ce24a0a3fc25c98606f673d79ae90c6d3de81a/src/utils/isObject.ts#L4) í”„ë¡œì íŠ¸ ì½”ë“œ ì¤‘ ì¼ë¶€ì…ë‹ˆë‹¤.

```ts
export const isObjectType = (value: unknown): value is object => typeof value === 'object';
```

ì´ ì½”ë“œì—ì„œ

```ts
value is object
```

ëŠ” ë¬´ì—‡ì¼ê¹Œìš”? ì´ê²ƒì„ `íƒ€ì… ì„œìˆ ì–´`(Type Predicate)ë¼ê³  ë¶€ë¦…ë‹ˆë‹¤. **íƒ€ì…ìŠ¤í¬ë¦½íŠ¸ 5.5ë²„ì „ ë¶€í„°ëŠ” ì•„ë§ˆ ì´ëŸ¬í•œ íƒ€ì… ì„œìˆ ì–´ê°€ í•„ìš”ì—†ì„ ìˆ˜ë„ ìˆìŠµë‹ˆë‹¤.** íƒ€ì…ìŠ¤í¬ë¦½íŠ¸ [#57465](https://github.com/microsoft/TypeScript/pull/57465) PRì—ì„œ í•¨ìˆ˜ì˜ íƒ€ì… ì„œìˆ ì–´ë¥¼ ìë™ìœ¼ë¡œ ìœ ì¶”í•˜ëŠ” ê¸°ëŠ¥ì´ ì¶”ê°€ë˜ì—ˆê¸° ë•Œë¬¸ì…ë‹ˆë‹¤.

ì´ë²ˆ ê¸€ì—ì„œëŠ” `íƒ€ì… ì¢íˆê¸°`, `íƒ€ì… ì„œìˆ ì–´`, ê·¸ë¦¬ê³  ì¶”ê°€ë  `íƒ€ì… ì„œìˆ ì–´ ì¶”ë¡ ` ê¸°ëŠ¥ì— ëŒ€í•´ ìì„¸íˆ ì•Œì•„ë³´ê² ìŠµë‹ˆë‹¤.

## 1. íƒ€ì… ì¢íˆê¸°(Type narrowing)

ë¨¼ì € íƒ€ì… ì¢íˆê¸°ì— ëŒ€í•´ ì•Œì•„ë³´ê² ìŠµë‹ˆë‹¤. íƒ€ì… ì¢íˆê¸°ë€ **ì–´ë–¤ ë³€ìˆ˜ì— ëŒ€í•´ ì •í™•í•œ íƒ€ì…ìœ¼ë¡œ ê²°ì •í•˜ëŠ” ê²ƒì„ íƒ€ì… ì¢íˆê¸°ë¼ê³  í•©ë‹ˆë‹¤.**

ì½”ë“œë¥¼ ì‘ì„±í•˜ë‹¤ë³´ë©´ ì–´ë–¤ ë³€ìˆ˜ì˜ íƒ€ì…ì„ ì •í™•í•˜ê²Œ ì•Œ ìˆ˜ ì—†ëŠ” ê²½ìš°ê°€ ìˆìŠµë‹ˆë‹¤. ë³€ìˆ˜ê°€ ìˆ«ì íƒ€ì…ì´ê±°ë‚˜ ë¬¸ìì—´ íƒ€ì…ì´ê±°ë‚˜ í•˜ëŠ” ê²½ìš°ì²˜ëŸ¼ìš”. ì´ëŸ´ ë•Œ íƒ€ì…ìŠ¤í¬ë¦½íŠ¸ëŠ” íƒ€ì… ì¢íˆê¸°ë¡œ íƒ€ì…ì„ ë‹¨ í•˜ë‚˜ë¡œ ê²°ì •í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤.

```ts
function foo(bar: number | string) {
  if (typeof bar === 'number') {
    return bar.toFixed(2); // barì˜ íƒ€ì…ì´ numberë¡œ ì¢í˜€ì§
  } else {
    return bar.toUpperCase(); // barì˜ íƒ€ì…ì´ stringìœ¼ë¡œ ì¢í˜€ì§
  }
}
```

ì•„ë˜ì™€ ê°™ì´ `íƒ€ì… ê°€ë“œ`ë¼ê³  ë¶€ë¥´ëŠ” ê²€ì‚¬ë¥¼ í†µí•´ ì—¬ëŸ¬ íƒ€ì…ì„ ê°€ì§€ëŠ” `bar`ì˜ íƒ€ì…ì„ í•˜ë‚˜ë¡œ ê²°ì •í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤.

```ts
// íƒ€ì… ê°€ë“œ
if (typeof bar === 'number')
```

ë³€ìˆ˜ê°€ ì™¸ë¶€ì—ì„œ ì˜¤ëŠ” ê²½ìš°ê±°ë‚˜ ì‚¬ìš©ìì˜ ì…ë ¥ì— ë”°ë¼ ë™ì ìœ¼ë¡œ ë³€í•˜ëŠ” ê²½ìš°ì— í•„ìš”í•œ ê¸°ëŠ¥ìœ¼ë¡œ íƒ€ì… ê°€ë“œë¥¼ ì‚¬ìš©í•˜ì—¬ **íƒ€ì…ì„ êµ¬ì²´í™”í•˜ê³  ê²°ì •í•˜ëŠ” ê³¼ì •ì„ íƒ€ì… ì¢íˆê¸°ë¼ê³  ë¶€ë¦…ë‹ˆë‹¤.**

## 2. íƒ€ì… ì¢íˆê¸°ë¥¼ í•¨ìˆ˜ë¡œ ì‘ì„±í•˜ê¸°

ê·¸ëŸ°ë° ë™ì¼í•œ íƒ€ì… ì¢íˆê¸°ë¥¼ ë§¤ë²ˆ ë°˜ë³µí•´ì„œ ì‘ì„±í•˜ëŠ” ê²ƒì€ ë²ˆê±°ë¡­ìŠµë‹ˆë‹¤. ë°˜ë³µì„ í”¼í•˜ê¸° ìœ„í•´ íƒ€ì… ì¢íˆê¸°ë¥¼ ë‹¤ìŒê³¼ ê°™ì´ í•¨ìˆ˜ë¡œ ì‘ì„±í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤.

```ts
function isNumber(bar: number | string) {
  return typeof bar === 'number';
}
```

ê·¸ë ‡ë‹¤ë©´ ì´ì œ íƒ€ì… ì¢íˆê¸° ì½”ë“œë¥¼ í•¨ìˆ˜ë¡œ ì‘ì„±í–ˆìœ¼ë‹ˆ ì•„ê¹Œ ì‘ì„±í–ˆë˜ `foo` í•¨ìˆ˜ì— `isNumber` í•¨ìˆ˜ë¥¼ ì ìš©í•´ë³¼ê¹Œìš”? ê³¼ì—° ì˜ ì‘ë™í• ê¹Œìš”?

```ts
function foo(bar: number | string) {
  if (isNumber(bar)) {
    return bar.toFixed(2); // error) 'string | number' í˜•ì‹ì— 'toFixed' ì†ì„±ì´ ì—†ìŠµë‹ˆë‹¤.
  } else {
    return bar.toUpperCase();
  }
}
```

ì•ˆíƒ€ê¹ê²Œë„ íƒ€ì…ìŠ¤í¬ë¦½íŠ¸ëŠ” `isNumber` í•¨ìˆ˜ë¥¼ í†µí•´ íƒ€ì…ì„ ì¢íˆì§€ ëª»í•©ë‹ˆë‹¤ ğŸ˜¢. isNumber()ë¡œ ê²€ì‚¬ë¥¼ ì´ë¯¸ í–ˆìŒì—ë„ barì˜ íƒ€ì…ì„ `string | number`ìœ¼ë¡œ ì•Œê³ ìˆë„¤ìš”.

**í•¨ìˆ˜ë¡œ ì‘ì„±í–ˆê¸° ë•Œë¬¸ì— íƒ€ì…ìŠ¤í¬ë¦½íŠ¸ê°€ ì¶”ë¡ í•˜ì§€ ëª»í•˜ëŠ” ìƒí™©**ì…ë‹ˆë‹¤. ì´ëŸ° ê²½ìš°ë¥¼ í•´ê²°í•˜ê¸° ìœ„í•´ì„œëŠ” `íƒ€ì… ì„œìˆ ì–´`ë¥¼ ì‚¬ìš©í•´ì•¼ í•©ë‹ˆë‹¤.

## 3. íƒ€ì… ì„œìˆ ì–´(Type Predicate)

íƒ€ì… ì„œìˆ ì–´ëŠ” ì§ì ‘ì ìœ¼ë¡œ íƒ€ì…ì„ ì œì–´í•˜ëŠ” ë°©ë²•ì…ë‹ˆë‹¤. íƒ€ì… ì„œìˆ ì–´ëŠ” `parameterName is Type` í˜•íƒœë¡œ ì‘ì„±í•˜ë©° `parameterName`ëŠ” í•¨ìˆ˜ì˜ ë§¤ê°œë³€ìˆ˜ ì´ë¦„ì´ê³  `Type`ì€ ì„œìˆ í•˜ê³ ì í•˜ëŠ” íƒ€ì…ì…ë‹ˆë‹¤.

ìœ„ì—ì„œ ì •ì˜í•œ isNumber í•¨ìˆ˜ë¥¼ íƒ€ì… ì„œìˆ ì–´ë¥¼ ì¶”ê°€í•˜ì—¬ ë‹¤ì‹œ ì‘ì„±í•˜ë©´ ë‹¤ìŒê³¼ ê°™ìŠµë‹ˆë‹¤

```ts
function isNumber(bar: number | string): bar is number {
  return typeof bar === 'number';
}
```

```ts
function foo(bar: number | string) {
  if (isNumber(bar)) {
    return bar.toFixed(2); // barì˜ íƒ€ì…ì´ numberë¡œ ì¢í˜€ì§
  } else {
    return bar.toUpperCase(); // barì˜ íƒ€ì…ì´ stringìœ¼ë¡œ ì¢í˜€ì§
  }
}
```

ì´ì œ ì˜ ë™ì‘í•˜ëŠ” ê²ƒì„ í™•ì¸í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤ ğŸ™Œ ì´ì œ íƒ€ì…ìŠ¤í¬ë¦½íŠ¸ëŠ” ì •í™•í•˜ê²Œ íƒ€ì…ì„ ì¢í ìˆ˜ ìˆìŠµë‹ˆë‹¤.

## 4. íƒ€ì… ì„œìˆ ì–´ì˜ ë¬¸ì œì 

ê·¸ëŸ°ë° ë§ì´ì£ . íƒ€ì… ì„œìˆ ì–´ë¥¼ ì‚¬ìš©í•˜ë©´ ë‹¨ì ì´ 2ê°€ì§€ ì •ë„ ìˆìŠµë‹ˆë‹¤. ì²« ë²ˆì§¸ ë‹¨ì ì€ ì‘ì„±í•˜ê¸° ë²ˆê±°ë¡­ë‹¤ëŠ” ì ì…ë‹ˆë‹¤.

ë™ì¼í•œ ê¸°ëŠ¥ì„ ë‹¨ì§€ í•¨ìˆ˜ë¡œ ì‘ì„±í–ˆì„ ë¿ì¸ë° íƒ€ì… ì„œìˆ ì–´ë¥¼ ì¶”ê°€í•´ì•¼ í•˜ëŠ” ë²ˆê±°ë¡œì›€ì´ ìˆìŠµë‹ˆë‹¤. ë‹¨ì§€ ëª‡ ì ì¶”ê°€í•˜ëŠ” ì •ë„ì´ê¸° ë•Œë¬¸ì— í° ë¬¸ì œëŠ” ì•„ë‹ˆì§€ë§Œ ì—¬ëŸ¬ í•¨ìˆ˜ì— ì ìš©í•´ì•¼ í•œë‹¤ë©´ ë²ˆê±°ë¡œìš¸ ìˆ˜ ìˆìŠµë‹ˆë‹¤.

**ë‘ ë²ˆì§¸ ë‹¨ì ì€ íœ´ë¨¼ ì—ëŸ¬ë¡œ ì˜ëª»ëœ íƒ€ì…ì„ ì„œìˆ í–ˆì„ ë•Œ ë°œìƒí•˜ëŠ” ê²½ìš°ì…ë‹ˆë‹¤.** ë‹¤ìŒê³¼ ì˜ˆì‹œë¥¼ í•œ ë²ˆ ì‚´í´ë³´ê² ìŠµë‹ˆë‹¤.

```ts
// `bar is string`ìœ¼ë¡œ ì˜ëª» ì‘ì„±í–ˆì„ ê²½ìš°
function isNumber(bar: number | string): bar is string {
  return typeof bar === 'number';
}
```

ìœ„ì™€ ê°™ì´ íƒ€ì… ì„œìˆ ì–´ `bar is string` ì™€ ì‹¤ì œ ê²€ì‚¬í•˜ëŠ” ì½”ë“œ `typeof bar === 'number'` ê°€ ì¼ì¹˜í•˜ì§€ ì•Šì•„ë„ **íƒ€ì…ìŠ¤í¬ë¦½íŠ¸ëŠ” íƒ€ì… ì„œìˆ ì–´ì— ë”°ë¼ íƒ€ì…ì„ ì¢íˆê²Œ ë©ë‹ˆë‹¤.**

```ts
function foo(bar: number | string) {
  if (isNumber(bar)) {
    // barì˜ íƒ€ì…ì€ íƒ€ì… ì„œìˆ ì–´ê°€ ì„œìˆ í•œ íƒ€ì… `string`ìœ¼ë¡œ ì¢í˜€ì§„ë‹¤.
  } else {
  }
}
```

ë¬¸ì œê°€ ìƒê¸¸ ìˆ˜ ìˆëŠ” ë˜ë‹¤ë¥¸ ê·¹ë‹¨ì ì¸ ì˜ˆì‹œë¥¼ í•œ ë²ˆ ìƒê°í•´ë³´ê² ìŠµë‹ˆë‹¤.

ë‹¤ìŒê³¼ ê°™ì´ 2D ì¢Œí‘œì™€ 3D ì¢Œí‘œë¥¼ ë‚˜íƒ€ë‚´ëŠ” íƒ€ì…ì´ ìˆìŠµë‹ˆë‹¤. ê·¸ë¦¬ê³  ì–´ë–¤ ì¢Œí‘œë¥¼ `isPoint3D` í•¨ìˆ˜ë¡œ íƒ€ì…ì„ ì¢íˆê³  ì‹¶ìŠµë‹ˆë‹¤.

```ts
type Point2D = { x: number; y: number };
type Point3D = { x: number; y: number; z: number };

function isPoint3D(point: Point2D | Point3D): point is Point2D {
  return 'x' in point && 'y' in point && 'z' in point;
}
```

ê·¸ëŸ°ë° íƒ€ì… ì„œìˆ ì–´ë¥¼ `point is Point2D` ì™€ ê°™ì´ ì˜ëª» ì‘ì„±í–ˆë‹¤ë©´ ì–´ë–»ê²Œ ë ê¹Œìš”?

```ts
function someAction(point: Point2D | Point3D) {
  if (isPoint3D(point)) {
    // pointì˜ íƒ€ì…ì€ íƒ€ì… ì„œìˆ ì–´ê°€ ì„œìˆ í•œ íƒ€ì… Point2Dë¡œ ì¢í˜€ì§„ë‹¤.
  } else {
  }
}
```

íƒ€ì…ìŠ¤í¬ë¦½íŠ¸ëŠ” íƒ€ì… ì„œìˆ ì–´ê°€ ì„œìˆ í•œ íƒ€ì…ìœ¼ë¡œ `Point2D` íƒ€ì…ìœ¼ë¡œ ì¢í˜€ì§€ê¸° ë•Œë¬¸ì— `point.z`ì— ì ‘ê·¼í•˜ëŠ” ì½”ë“œê°€ ì—†ë‹¤ë©´ ì»´íŒŒì¼ ì‹œì ì— ì—ëŸ¬ê°€ ë°œìƒí•˜ì§€ ì•ŠìŠµë‹ˆë‹¤. **ì´ëŠ” ëŸ°íƒ€ì„ ì‹œì ì— í›¨ì”¬ ì‹¬ê°í•œ ì—ëŸ¬ê°€ ë°œìƒí•  ìˆ˜ ìˆëŠ” ìƒí™©ì„ ë§Œë“¤ ìˆ˜ ìˆìŠµë‹ˆë‹¤.**

## 5. íƒ€ì… ì„œìˆ ì–´ ì¶”ë¡ (Type Predicate Inference)

íƒ€ì…ìŠ¤í¬ë¦½íŠ¸ 5.5ë¶€í„° ë„ì…ë˜ëŠ” ìë™ ì¶”ë¡  ê¸°ëŠ¥ìœ¼ë¡œ ì¸í•´ **ë” ì´ìƒ íƒ€ì… ì„œìˆ ì–´ë¥¼ ì‘ì„±í•˜ì§€ ì•Šì•„ë„ íƒ€ì…ì„ ìë™ìœ¼ë¡œ ìœ ì¶”**í•  ìˆ˜ ìˆê²Œ ë©ë‹ˆë‹¤! ì´ì œ ë²ˆê±°ë¡œìš´ ì‘ì„±ê³¼ íœ´ë¨¼ ì—ëŸ¬ë¥¼ ì¤„ì¼ ìˆ˜ ìˆê²Œ ë˜ì—ˆìŠµë‹ˆë‹¤.

```ts
// íƒ€ì…ìŠ¤í¬ë¦½íŠ¸ 5.5ë¶€í„° ë„ì…ë˜ëŠ” ê¸°ëŠ¥

// bar is numberë¼ëŠ” íƒ€ì… ì„œìˆ ì–´ê°€ ì—†ì–´ë„ ë™ì‘
function isNumber(bar: number | string) {
  return typeof bar === 'number';
}

function foo(bar: number | string) {
  if (isNumber(bar)) {
    // barì˜ íƒ€ì…ì€ numberë¡œ ì¢í˜€ì§„ë‹¤.
  } else {
  }
}
```

[#57465](https://github.com/microsoft/TypeScript/pull/57465) PRì— ë”°ë¥´ë©´ ë‹¤ìŒê³¼ ê°™ì´ ìœ ìš©í•œ ì˜ˆì‹œë¥¼ ë³¼ ìˆ˜ ìˆìŠµë‹ˆë‹¤. íŠ¹íˆ ì €ëŠ” filter ì˜ˆì‹œê°€ ê½¤ë‚˜ ìœ ìš©í•  ê²ƒ ê°™ìŠµë‹ˆë‹¤.

```ts
const nums = [12, 'foo', 23, 'bar'].filter(x => typeof x === 'number');

// ë„ì…ì „) numsëŠ” (string | number)[] íƒ€ì…ì„ ê°€ì§‘ë‹ˆë‹¤.

// ë„ì…í›„) ì´ì œ numsëŠ” number[] íƒ€ì…ì„ ê°€ì§‘ë‹ˆë‹¤.
```
